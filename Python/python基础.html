<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>python基础 | Jachin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="Python" />
  
  
  
  
  <meta name="description" content="Strings
A string is a sequence of values that represent Unicode code points. All the code points in the range U+0000 - U+10FFFF can be represented in a string. Python doesn’t have a char type; instead">
<meta property="og:type" content="article">
<meta property="og:title" content="python基础">
<meta property="og:url" content="https://ygcaicn.github.io/Python/python基础.html">
<meta property="og:site_name" content="Jachin">
<meta property="og:description" content="Strings
A string is a sequence of values that represent Unicode code points. All the code points in the range U+0000 - U+10FFFF can be represented in a string. Python doesn’t have a char type; instead">
<meta property="og:image" content="http://i.imgur.com/3GmPd7O.png">
<meta property="og:updated_time" content="2017-05-04T07:48:54.287Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python基础">
<meta name="twitter:description" content="Strings
A string is a sequence of values that represent Unicode code points. All the code points in the range U+0000 - U+10FFFF can be represented in a string. Python doesn’t have a char type; instead">
<meta name="twitter:image" content="http://i.imgur.com/3GmPd7O.png">
  
    <link rel="alternate" href="/atom.xml" title="Jachin" type="application/atom+xml">
  
  <link rel="icon" href="/img/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Oswald%3A300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >
  <link rel="stylesheet" href="/css/fashion.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >

</head>



  <body data-spy="scroll" data-target="#toc" data-offset="50">


  


<header id="allheader" class="site-header" role="banner" 
   >
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="Jachin" rel="home"> Jachin </a>
            
          </h1>
          
          
            <div class="site-description">openwrt  嵌入式  学习总结  思考感悟  知识管理</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>

            <div class="clearfix sf-menu">
              <ul id="main-nav" class="menu sf-js-enabled sf-arrows"  style="touch-action: pan-y;">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/gallery">gallery</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/link">link</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>

      </div>
  </div>
</header>


  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-python基础" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
<div class="article-gallery">
  <div class="article-gallery-photos">
    
      <a class="article-gallery-img fancybox" href="http://i.imgur.com/3GmPd7O.png" rel="gallery_cj9vkstla0021y0evlff9iyqo">
        <img src="http://i.imgur.com/3GmPd7O.png" itemprop="image">
      </a>
    
  </div>
</div>

    
      <header class="article-header">
        
  
    <h1 class="thumb" class="article-title" itemprop="name">
      python基础
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/Python/python基础.html" class="article-date">
	  <time datetime="2017-05-04T19:25:36.000Z" itemprop="datePublished">May 4, 2017</time>
	</a>

      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Python/">Python</a>
 
      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h1><blockquote>
<p>A string is a sequence of values that represent Unicode code points. All the code points in the range U+0000 - U+10FFFF can be represented in a string. Python doesn’t have a char type; instead, every code point in the string is represented as a string object with length 1. The built-in function ord() converts a code point from its string form to an integer in the range 0 - 10FFFF; chr() converts an integer in the range 0 - 10FFFF to the corresponding length 1 string object. <code>str.encode()</code> can be used to convert a str to bytes using the given text encoding, and <code>bytes.decode()</code> can be used to achieve the opposite.</p>
</blockquote>
<a id="more"></a>
<figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#str-&gt;bytes  </span></div><div class="line">str.encode(encoding=<span class="string">'UTF-8'</span>)</div><div class="line"></div><div class="line"><span class="comment">#bytes-&gt;str  </span></div><div class="line">bytes.decode(encoding=<span class="string">'UTF-8'</span>)</div></pre></td></tr></table></figure>
<p>document <a href="https://docs.python.org/" target="_blank" rel="external">https://docs.python.org/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">urllib  </div><div class="line">     urllib.error Exception classes raised by urllib.request. </div><div class="line">     urllib.parse Parse URLs into or assemble them from components. </div><div class="line">     urllib.request Extensible library for opening URLs. </div><div class="line">     urllib.response Response classes used by urllib. </div><div class="line">     urllib.robotparser Load a robots.txt file and answer questions about fetchability of other URLs.</div></pre></td></tr></table></figure>
<h1 id="标准数据类型"><a href="#标准数据类型" class="headerlink" title="标准数据类型"></a>标准数据类型</h1><ul>
<li>Python3 中有六个标准的数据类型：</li>
<li>Number（数字）    123</li>
<li>String（字符串）  ‘abc’/“abc”</li>
<li>List（列表）      []</li>
<li>Tuple（元组）     ()</li>
<li>Sets（集合）      ({})</li>
<li>Dictionary（字典）{key:value}</li>
<li></li>
</ul>
<blockquote>
<p>I have a tuple of tuples from a MySQL query like this:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">T1 = ((&apos;13&apos;, &apos;17&apos;, &apos;18&apos;, &apos;21&apos;, &apos;32&apos;),</div><div class="line">      (&apos;07&apos;, &apos;11&apos;, &apos;13&apos;, &apos;14&apos;, &apos;28&apos;),</div><div class="line">      (&apos;01&apos;, &apos;05&apos;, &apos;06&apos;, &apos;08&apos;, &apos;15&apos;, &apos;16&apos;))</div></pre></td></tr></table></figure></p>
</blockquote>
<p>I’d like to convert all the string elements into integers and put it back nicely to list of lists this time:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">T2 = [[13, 17, 18, 21, 32], [7, 11, 13, 14, 28], [1, 5, 6, 8, 15, 16]]</div></pre></td></tr></table></figure></p>
<p>I tried to achieve it with eval but didn’t get any decent result yet.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[int(column) for column in row] for row in T1]</div></pre></td></tr></table></figure></p>
<h1 id="一张图看Python"><a href="#一张图看Python" class="headerlink" title="一张图看Python"></a>一张图看Python</h1><p><img src="http://i.imgur.com/gAdiDlB.png" alt="Imgur"></p>
<h1 id="Python网络编程-百度语音接口实例"><a href="#Python网络编程-百度语音接口实例" class="headerlink" title="Python网络编程-百度语音接口实例"></a>Python网络编程-百度语音接口实例</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#</span></div><div class="line">  <span class="number">1</span> <span class="comment">#!/usr/bin/python3</span></div><div class="line">  <span class="number">2</span> </div><div class="line">  <span class="number">3</span> <span class="keyword">import</span> urllib</div><div class="line">  <span class="number">4</span> <span class="keyword">import</span> urllib.request</div><div class="line">  <span class="number">5</span> <span class="keyword">import</span> urllib.parse</div><div class="line">  <span class="number">6</span> <span class="keyword">import</span> json</div><div class="line">  <span class="number">7</span> <span class="keyword">import</span> os</div><div class="line">  <span class="number">8</span> <span class="keyword">import</span> sys</div><div class="line">  <span class="number">9</span> <span class="keyword">import</span> hashlib</div><div class="line"> <span class="number">10</span> <span class="keyword">import</span> uuid</div><div class="line"> <span class="number">11</span> <span class="keyword">import</span> base64</div><div class="line"> <span class="number">12</span> </div><div class="line"> <span class="number">13</span> <span class="class"><span class="keyword">class</span> <span class="title">BaiduRest</span>:</span></div><div class="line"> <span class="number">14</span>         <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,cu_id,api_key,api_secret)</span>:</span></div><div class="line"> <span class="number">15</span>                 self.toKen_url = <span class="string">"https://openapi.baidu.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=%s&amp;client_secret=%s&amp;"</span></div><div class="line"> <span class="number">16</span>                 self.getVoice_url = <span class="string">"http://tsn.baidu.com/text2audio"</span></div><div class="line"> <span class="number">17</span>                 self.upVoice_url = <span class="string">'http://vop.baidu.com/server_api'</span></div><div class="line"> <span class="number">18</span>                 self.cu_id = cu_id</div><div class="line"> <span class="number">19</span>                 self.api_key = api_key</div><div class="line"> <span class="number">20</span>                 self.api_secret = api_secret</div><div class="line"> <span class="number">21</span>                 <span class="keyword">if</span> <span class="keyword">not</span>  os.path.isdir(<span class="string">"./cache/"</span>):</div><div class="line"> <span class="number">22</span>                         os.mkdir(<span class="string">"./cache/"</span>)</div><div class="line"> <span class="number">23</span>                         os.mkdir(<span class="string">"./cache/audio"</span>)</div><div class="line"> <span class="number">24</span>                 <span class="keyword">if</span> <span class="keyword">not</span>  os.path.isdir(<span class="string">"./cache/audio"</span>):</div><div class="line"> <span class="number">25</span>                         os.mkdir(<span class="string">"./cache/audio"</span>)</div><div class="line"> <span class="number">26</span>                 <span class="keyword">try</span>:</div><div class="line"> <span class="number">27</span>                         file_toKen = open(<span class="string">"./cache/access_toKen"</span>,<span class="string">'r'</span>)</div><div class="line"> <span class="number">28</span>                         self.toKen = file_toKen.read()</div><div class="line"> <span class="number">29</span>                 <span class="keyword">except</span> FileNotFoundError:</div><div class="line"> <span class="number">30</span>                         self.getToKen(api_key,api_secret)</div><div class="line"> <span class="number">31</span>                 <span class="keyword">pass</span></div><div class="line"> <span class="number">32</span> </div><div class="line"> <span class="number">33</span> </div><div class="line"> <span class="number">34</span>         <span class="function"><span class="keyword">def</span> <span class="title">getToKen</span><span class="params">(self,api_key,api_secret)</span>:</span></div><div class="line"> <span class="number">35</span>                 self.toKen_url = self.toKen_url % (api_key,api_secret)</div><div class="line"> <span class="number">36</span>                 r_str = urllib.request.urlopen(self.toKen_url).read()</div><div class="line"> <span class="number">37</span>                 r_str = r_str.decode(encoding=<span class="string">"UTF-8"</span>)</div><div class="line"> <span class="number">38</span>                 r_json = json.loads(r_str)</div><div class="line"> <span class="number">39</span>                 self.toKen = r_json[<span class="string">"access_token"</span>]</div><div class="line"> <span class="number">40</span>                 file_toKen = open(<span class="string">"./cache/access_toKen"</span>,<span class="string">"w"</span>)</div><div class="line"> <span class="number">41</span>                 file_toKen.write(self.toKen)</div><div class="line"> <span class="number">42</span>                 file_toKen.close()</div><div class="line"> <span class="number">43</span>                 <span class="keyword">pass</span></div><div class="line"> <span class="number">44</span> </div><div class="line"> <span class="number">45</span>         <span class="function"><span class="keyword">def</span> <span class="title">getVoice</span><span class="params">(self,text,filename)</span>:</span></div><div class="line"> <span class="number">46</span>                 <span class="comment">#POST</span></div><div class="line"> <span class="number">47</span>                 params = urllib.parse.urlencode(&#123;<span class="string">'tex'</span>:urllib.parse.quote(text),<span class="string">'lan'</span>:<span class="string">'zh'</span>,<span class="string">'cuid'</span>:self.cu_id,<span class="string">'ctp'</span>:<span class="number">1</span>,<span class="string">'tok'</span>:urllib.parse.quote(self.toKen)&#125;)</div><div class="line"> <span class="number">48</span>                 real_url = urllib.request.Request(self.getVoice_url,params.encode(<span class="string">"utf-8"</span>))</div><div class="line"> <span class="number">49</span>                 httpResponse = urllib.request.urlopen(real_url)</div><div class="line"> <span class="number">50</span>                 <span class="keyword">if</span> httpResponse.getheader(<span class="string">'Content-type'</span>) == <span class="string">'audio/mp3'</span>:</div><div class="line"> <span class="number">51</span>                         <span class="comment">#print("toKen successful!")</span></div><div class="line"> <span class="number">52</span>                         <span class="comment">#os.system('date')</span></div><div class="line"> <span class="number">53</span>                         file_mp3 = open(filename,<span class="string">"wb+"</span>)</div><div class="line"> <span class="number">54</span>                         file_mp3.write(httpResponse.read())</div><div class="line"> <span class="number">55</span>                         file_mp3.close()</div><div class="line"> <span class="number">56</span>                 <span class="keyword">else</span>:</div><div class="line"> <span class="number">57</span>                         self.getToKen(self.api_key,self.api_secret)</div><div class="line"> <span class="number">39</span>                 self.toKen = r_json[<span class="string">"access_token"</span>]</div><div class="line"> <span class="number">40</span>                 file_toKen = open(<span class="string">"./cache/access_toKen"</span>,<span class="string">"w"</span>)</div><div class="line"> <span class="number">41</span>                 file_toKen.write(self.toKen)</div><div class="line"> <span class="number">42</span>                 file_toKen.close()</div><div class="line"> <span class="number">43</span>                 <span class="keyword">pass</span></div><div class="line"> <span class="number">44</span> </div><div class="line"> <span class="number">45</span>         <span class="function"><span class="keyword">def</span> <span class="title">getVoice</span><span class="params">(self,text,filename)</span>:</span></div><div class="line"> <span class="number">46</span>                 <span class="comment">#POST</span></div><div class="line"> <span class="number">47</span>                 params = urllib.parse.urlencode(&#123;<span class="string">'tex'</span>:urllib.parse.quote(text),<span class="string">'lan'</span>:<span class="string">'zh'</span>,<span class="string">'cuid'</span>:self.cu_id,<span class="string">'ctp'</span>:<span class="number">1</span>,<span class="string">'tok'</span>:urllib.parse.quote(self.toKen)&#125;)</div><div class="line"> <span class="number">48</span>                 real_url = urllib.request.Request(self.getVoice_url,params.encode(<span class="string">"utf-8"</span>))</div><div class="line"> <span class="number">49</span>                 httpResponse = urllib.request.urlopen(real_url)</div><div class="line"> <span class="number">50</span>                 <span class="keyword">if</span> httpResponse.getheader(<span class="string">'Content-type'</span>) == <span class="string">'audio/mp3'</span>:</div><div class="line"> <span class="number">51</span>                         <span class="comment">#print("toKen successful!")</span></div><div class="line"> <span class="number">52</span>                         <span class="comment">#os.system('date')</span></div><div class="line"> <span class="number">53</span>                         file_mp3 = open(filename,<span class="string">"wb+"</span>)</div><div class="line"> <span class="number">54</span>                         file_mp3.write(httpResponse.read())</div><div class="line"> <span class="number">55</span>                         file_mp3.close()</div><div class="line"> <span class="number">56</span>                 <span class="keyword">else</span>:</div><div class="line"> <span class="number">57</span>                         self.getToKen(self.api_key,self.api_secret)</div><div class="line"> <span class="number">54</span>                         file_mp3.write(httpResponse.read())</div><div class="line"> <span class="number">54</span>                         file_mp3.write(httpResponse.read())</div><div class="line"> <span class="number">54</span>                         file_mp3.write(httpResponse.read())</div><div class="line"> <span class="number">55</span>                         file_mp3.close()</div><div class="line"> <span class="number">56</span>                 <span class="keyword">else</span>:</div><div class="line"> <span class="number">57</span>                         self.getToKen(self.api_key,self.api_secret)</div><div class="line"> <span class="number">58</span>                         self.getVoice(text,filename)</div><div class="line"> <span class="number">59</span> </div><div class="line"> <span class="number">60</span>                 <span class="keyword">pass</span></div><div class="line"> <span class="number">61</span>         <span class="function"><span class="keyword">def</span> <span class="title">getText</span><span class="params">(self, filename)</span>:</span></div><div class="line"> <span class="number">62</span>                 data = &#123;&#125;</div><div class="line"> <span class="number">63</span>                 data[<span class="string">'format'</span>] = <span class="string">'wav'</span></div><div class="line"> <span class="number">64</span>                 data[<span class="string">'rate'</span>] = <span class="number">16000</span></div><div class="line"> <span class="number">65</span>                 data[<span class="string">'channel'</span>] = <span class="number">1</span></div><div class="line">  <span class="number">6</span>                 data[<span class="string">'cuid'</span>] = self.cu_id</div><div class="line"> <span class="number">67</span>                 data[<span class="string">'token'</span>] = self.toKen</div><div class="line"> <span class="number">68</span>                 wav_fp = open(filename,<span class="string">'rb'</span>)</div><div class="line"> <span class="number">69</span>                 voice_data = wav_fp.read()</div><div class="line"> <span class="number">70</span>                 data[<span class="string">'len'</span>] = len(voice_data)</div><div class="line"> <span class="number">71</span>                 data[<span class="string">'speech'</span>] = base64.b64encode(voice_data).decode(<span class="string">'utf-8'</span>)</div><div class="line"> <span class="number">72</span>                 post_data = json.dumps(data)</div><div class="line"> <span class="number">73</span>                 reque = urllib.request.Request(self.upVoice_url,post_data.encode(encoding=<span class="string">"UTF-8"</span>))</div><div class="line"> <span class="number">74</span>                 r_data = urllib.request.urlopen(reque).read()</div><div class="line"> <span class="number">75</span>                 <span class="comment"># 3.处理返回数据</span></div><div class="line"> <span class="number">76</span>                 r_json = json.loads(r_data.decode(encoding=<span class="string">'utf-8'</span>))</div><div class="line"> <span class="number">77</span>                 <span class="keyword">if</span> <span class="string">'result'</span> <span class="keyword">in</span> r_json:</div><div class="line"> <span class="number">78</span>                         <span class="keyword">return</span>  r_json[<span class="string">'result'</span>]</div><div class="line"> <span class="number">79</span>                 <span class="keyword">else</span>:</div><div class="line"> <span class="number">80</span>                         print(r_json)</div><div class="line"> <span class="number">81</span>                         <span class="keyword">return</span> r_json[<span class="string">'err_no'</span>]</div><div class="line"> <span class="number">82</span> </div><div class="line"> <span class="number">83</span> <span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line"> <span class="number">84</span>         os.system(<span class="string">'date'</span>)</div><div class="line"> <span class="number">85</span>         api_key = <span class="string">"6PPBMVeF1BIWbXmNuUfEivK3"</span></div><div class="line"> <span class="number">86</span>         api_secret = <span class="string">"0c5ee6597954b09bee9083624ff3d9a4"</span></div><div class="line"> <span class="number">87</span>         text = sys.argv[<span class="number">1</span>]</div><div class="line"> <span class="number">88</span>         tmpname_wav = hashlib.md5(text.encode(encoding=<span class="string">"UTF-8"</span>)).hexdigest() + <span class="string">'.wav'</span></div><div class="line"> <span class="number">89</span>         tmpname_wav = <span class="string">'./cache/audio/'</span> + tmpname_wav</div><div class="line"> <span class="number">90</span>         <span class="keyword">if</span> os.path.isfile(tmpname_wav):</div><div class="line"> <span class="number">91</span>                 print(<span class="string">"exist!"</span>)</div><div class="line"> <span class="number">92</span>                 os.system(<span class="string">"omxplayer --loop \""</span> + tmpname_wav + <span class="string">'\"'</span>)</div><div class="line"> <span class="number">93</span>         <span class="keyword">else</span>:</div><div class="line"> <span class="number">94</span>                 mac = uuid.UUID(int = uuid.getnode()).hex[<span class="number">-12</span>:]</div><div class="line"> <span class="number">95</span>                 mac = <span class="string">":"</span>.join([mac[e:e+<span class="number">2</span>] <span class="keyword">for</span> e <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">11</span>,<span class="number">2</span>)])</div><div class="line"> <span class="number">96</span>                 baiduVoice = BaiduRest(mac,api_key,api_secret)</div><div class="line"> <span class="number">97</span>                 baiduVoice.getVoice(text,tmpname_wav)</div><div class="line"> <span class="number">98</span>                 os.system(<span class="string">'date'</span>)</div><div class="line"> <span class="number">99</span>                 <span class="comment">#os.system("omxplayer --loop \"" + tmpname_wav + "\"")</span></div><div class="line"><span class="number">100</span>                 print(baiduVoice.getText(tmpname_wav))</div><div class="line"><span class="number">101</span> </div><div class="line"><span class="number">102</span></div></pre></td></tr></table></figure>
<h1 id="urllib-request"><a href="#urllib-request" class="headerlink" title="urllib.request"></a>urllib.request</h1><h2 id="get"><a href="#get" class="headerlink" title="get"></a>get</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">from urllib import request, parse</div><div class="line"># Base URL being accessed</div><div class="line">url = &apos;http://httpbin.org/get&apos;</div><div class="line"># Dictionary of query parameters (if any)</div><div class="line">parms = &#123;</div><div class="line">&apos;name1&apos; : &apos;value1&apos;,</div><div class="line">&apos;name2&apos; : &apos;value2&apos;</div><div class="line">&#125;</div><div class="line"># Encode the query string</div><div class="line">querystring = parse.urlencode(parms)</div><div class="line"># Make a GET request and read the response</div><div class="line">u = request.urlopen(url+&apos;?&apos; + querystring)</div><div class="line">resp_bytes = u.read()</div></pre></td></tr></table></figure>
<h2 id="post"><a href="#post" class="headerlink" title="post"></a>post</h2><h3 id="post-stand-fomer"><a href="#post-stand-fomer" class="headerlink" title="post stand fomer"></a>post stand fomer</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">from urllib import request, parse</div><div class="line"># Base URL being accessed</div><div class="line">url = &apos;http://httpbin.org/post&apos;</div><div class="line"># Dictionary of query parameters (if any)</div><div class="line">parms = &#123;</div><div class="line">&apos;name1&apos; : &apos;value1&apos;,</div><div class="line">&apos;name2&apos; : &apos;value2&apos;</div><div class="line">&#125;</div><div class="line"># Encode the query string</div><div class="line">querystring = parse.urlencode(parms)</div><div class="line"># Make a POST request and read the response</div><div class="line">res = request.urlopen(url, querystring.encode(encoding = &apos;utf-8&apos;))</div><div class="line">html_str = res.read()</div></pre></td></tr></table></figure>
<h3 id="post-json"><a href="#post-json" class="headerlink" title="post json"></a>post json</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">parms = &#123;</div><div class="line">&apos;name1&apos; : &apos;value1&apos;,</div><div class="line">&apos;name2&apos; : &apos;value2&apos;</div><div class="line">&#125;</div><div class="line">post_data = json.dumps(parms)</div><div class="line">res = urllib.request.urlopen(url,post_data.encod(encoding=&quot;utf-8&quot;))</div><div class="line">html_str =res.read()</div></pre></td></tr></table></figure>
<h2 id="header"><a href="#header" class="headerlink" title="header"></a>header</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">from urllib import request, parse</div><div class="line"></div><div class="line"># Extra headers</div><div class="line">headers = &#123;</div><div class="line">&apos;User-agent&apos; : &apos;none/ofyourbusiness&apos;,</div><div class="line">&apos;Spam&apos; : &apos;Eggs&apos;</div><div class="line">&#125;</div><div class="line">req = request.Request(url, querystring.encode(&apos;ascii&apos;), headers=headers)</div><div class="line"># Make a request and read the response</div><div class="line">res = request.urlopen(req)</div><div class="line">html_str = res.read()</div></pre></td></tr></table></figure>
<h3 id="header-example"><a href="#header-example" class="headerlink" title="header example"></a>header example</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">headers=&#123;</div><div class="line">&apos;Connection&apos;: &apos;keep-alive&apos;,</div><div class="line">&apos;Cache-Control&apos;: &apos;max-age=0&apos;,</div><div class="line">&apos;Upgrade-Insecure-Requests&apos;: 1,</div><div class="line">&apos;User-Agent&apos;: &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36&apos;,</div><div class="line">&apos;Accept&apos;: &apos;text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8&apos;,</div><div class="line">&apos;Accept-Encoding&apos;: &apos;gzip, deflate, sdch&apos;,</div><div class="line">&apos;Accept-Language&apos;: &apos;zh-CN,zh;q=0.8,en;q=0.6&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Content-Type: application/x-www-form-urlencoded</div><div class="line">Content-Type: application/json</div></pre></td></tr></table></figure>
<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">GET / HTTP/1.1</div><div class="line">Host: ip.cn</div><div class="line">Connection: keep-alive</div><div class="line">Upgrade-Insecure-Requests: 1</div><div class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36</div><div class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div><div class="line">Accept-Encoding: gzip, deflate, sdch</div><div class="line">Accept-Language: zh-CN,zh;q=0.8,en;q=0.6</div><div class="line">Cookie: UM_distinctid=15ae0d3744b437-0ebcb4eece40e4-57e1b3c-100200-15ae0d3744c42b; CNZZDATA123770=cnzz_eid%3D646344926-1484393339-%26ntime%3D1489830206</div></pre></td></tr></table></figure>
<h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><p>encoding:gzip</p>
<p><img src="http://i.imgur.com/gNVZvxJ.png" alt="Imgur"></p>
<p>when unzip the body,we can see:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 200 OK</div><div class="line">Server: nginx/1.8.0</div><div class="line">Date: Sat, 18 Mar 2017 10:54:28 GMT</div><div class="line">Content-Type: text/html; charset=UTF-8</div><div class="line">Connection: keep-alive</div><div class="line">Vary: Accept-Encoding</div><div class="line">X-Powered-By: PHP/5.6.30-1~dotdeb+7.1</div><div class="line">Content-Length: 3189</div><div class="line"></div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;</div><div class="line">&lt;link href=&quot;http://s.ip-cdn.com&quot; rel=&quot;dns-prefetch&quot; /&gt;</div><div class="line">&lt;title&gt;IP.cn - IP 地址查询 | 地理位置 | 手机归属地&lt;/title&gt;</div><div class="line">&lt;meta name=&quot;robots&quot; content=&quot;all&quot; /&gt;</div><div class="line">&lt;meta name=&quot;Keywords&quot; content=&quot;ip,ip查询,手机ip,本机ip,外网ip,ip地址查询,手机号,归属地&quot;&gt;</div><div class="line">&lt;meta name=&quot;Description&quot; content=&quot;专业本机 IP 地址查询、手机 IP 地址、地理位置查询、IP 数据库、手机号归属地查询、电话号码黄页查询，可查广告、骚扰、快递、银行、保险、房地产、中介电话。&quot;&gt;</div><div class="line">&lt;link href=&apos;http://s.ip-cdn.com/css/bootstrap.min.css&apos; rel=&apos;stylesheet&apos; type=&apos;text/css&apos;&gt;</div><div class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, minimum-scale=0.5&quot;&gt;</div><div class="line">&lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot;&gt;</div><div class="line">&lt;!--[if lt IE 8]&gt;</div><div class="line">&lt;script src=&quot;http://s.ip-cdn.com/js/ie8.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;![endif]--&gt;</div><div class="line">&lt;link href=&apos;http://s.ip-cdn.com/css/main.css&apos; rel=&apos;stylesheet&apos; type=&apos;text/css&apos;&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body onLoad=&quot;document.fs.ip.focus()&quot;&gt;</div><div class="line">.</div><div class="line">.</div><div class="line">.</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><h2 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h2><p><a href="http://www.runoob.com/python3/python3-tutorial.html" target="_blank" rel="external">Python3教程</a></p>
<h2 id="进阶技巧"><a href="#进阶技巧" class="headerlink" title="进阶技巧"></a>进阶技巧</h2><p><a href="https://github.com/yidao620c/python3-cookbook" target="_blank" rel="external">python3-cookbook</a><br><a href="http://docspy3zh.readthedocs.io/en/latest/index.html" target="_blank" rel="external">readthedocs</a><br><a href="http://cn.python-requests.org/zh_CN/latest/" target="_blank" rel="external">python-requests</a></p>
<p>httbin.org</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Python/">Python</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

      
        
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'jachin';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>



      
    </footer>
    <hr class="entry-footer-hr">
  </div>
  
    
<nav id="article-nav">
  
    <a href="/Machine-Learning/Mechine-Learning.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          【Machine Learning】机器学习：简明入门指南
        
      </div>
    </a>
  
  
    <a href="/Linux/GPT.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">GPT(GUID partition table)</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Strings"><span class="nav-number">1.</span> <span class="nav-text">Strings</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#标准数据类型"><span class="nav-number">2.</span> <span class="nav-text">标准数据类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一张图看Python"><span class="nav-number">3.</span> <span class="nav-text">一张图看Python</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Python网络编程-百度语音接口实例"><span class="nav-number">4.</span> <span class="nav-text">Python网络编程-百度语音接口实例</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#urllib-request"><span class="nav-number">5.</span> <span class="nav-text">urllib.request</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#get"><span class="nav-number">5.1.</span> <span class="nav-text">get</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#post"><span class="nav-number">5.2.</span> <span class="nav-text">post</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#post-stand-fomer"><span class="nav-number">5.2.1.</span> <span class="nav-text">post stand fomer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#post-json"><span class="nav-number">5.2.2.</span> <span class="nav-text">post json</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#header"><span class="nav-number">5.3.</span> <span class="nav-text">header</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#header-example"><span class="nav-number">5.3.1.</span> <span class="nav-text">header example</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Request"><span class="nav-number">5.4.</span> <span class="nav-text">Request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Response"><span class="nav-number">5.5.</span> <span class="nav-text">Response</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考"><span class="nav-number">6.</span> <span class="nav-text">参考</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#入门"><span class="nav-number">6.1.</span> <span class="nav-text">入门</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#进阶技巧"><span class="nav-number">6.2.</span> <span class="nav-text">进阶技巧</span></a></li></ol></li></ol>
    
    </div>
  </aside>
</section>
        
      </div>

    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/gallery" class="mobile-nav-link">Gallery</a>
  
    <a href="/link" class="mobile-nav-link">Link</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2017 Jachin All Rights Reserved.
        
      </div>
      <div class="site-credit">
<!--        
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hipaper" target="_blank">hipaper</a>
-->      
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");

    wrapdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";


    <!-- headerblur min height -->
    
    
</script>

    
<div style="display: none;">
  <script src="https://s11.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
</div>

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>
<script src="/js/main.js"></script>


<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-103029370-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->






  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1263042211&web_id=1263042211" language="JavaScript"></script>
  </div>








  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
